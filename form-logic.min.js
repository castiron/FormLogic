(function(){var l;l=function(){};var j=function(a){var b,c,d;this.$el=a;this.$el.hide();this.parentName=this.$el.data("depends-on");this.parents=[];d=$('[name="'+this.parentName+'"]:not([type="hidden"])');b=0;for(c=d.length;b<c;b++)a=d[b],$(a).is('[type="checkbox"]')?this.parentType="checkbox":$(a).is('[type="radio"]')&&(this.parentType="radio"),this.parents.push($(a));this.$el.data("show-if")?this.setupShowIf():this.$el.data("show-if-any")&&this.setupShowIfAny()};j.prototype.setupShowIf=function(){var a,
b,c,d,e,f,g;c=this.$el.data("show-if");b=this;f=this.parents;g=[];d=0;for(e=f.length;d<e;d++)a=f[d],g.push(a.change(function(){return"checkbox"===b.parentType||"radio"===b.parentType?$(this).is(":checked")&&$(this).val()===c.toString()?b.show():b.hide():$(this).val()===c?b.show():b.hide()}).change());return g};j.prototype.setupShowIfAny=function(){var a,b,c,d,e,f,g=this;if("radio"===this.parentType||"checkbox"===this.parentType){b=this;e=this.parents;f=[];c=0;for(d=e.length;c<d;c++)a=e[c],f.push(a.change(function(){var c,
d,e,f;c=!1;f=b.parents;d=0;for(e=f.length;d<e;d++)a=f[d],a.is(":checked")&&(c=!0);return c?b.show():b.hide()}));return f}e=this.parents;f=[];c=0;for(d=e.length;c<d;c++)a=e[c],f.push(a.change(function(){return""!==a.val()?g.show():g.hide()}));return f};j.prototype.show=function(){var a,b,c,d,e,f;this.$el.show();e=this.$el.find("*");f=[];c=0;for(d=e.length;c<d;c++)a=e[c],(b=$(a).attr("name"))?(b=$('[data-depends-on="'+b+'"]'),0<b.length?f.push($(a).change()):f.push(void 0)):f.push(void 0);return f};
j.prototype.hide=function(){var a,b,c,d,e;this.$el.hide();d=this.$el.find("*");e=[];b=0;for(c=d.length;b<c;b++)a=d[b],(a=$(a).attr("name"))?e.push($('[data-depends-on="'+a+'"]').hide()):e.push(void 0);return e};var h=function(a,b){var c,d,e,f,g=this;this.options=b;this.$el=$(a);this.$submit=this.$el.find('input[type="submit"]');f=this.$el.find("input");d=0;for(e=f.length;d<e;d++)c=f[d],this.addHint($(c));this.$submit.click(function(){var a,b,d,e,f,h,j,k;h=g.$el.find(".hasError");b=0;for(f=h.length;b<
f;b++)a=h[b],$(a).removeClass(".hasError");h=g.$el.find(".error");b=0;for(f=h.length;b<f;b++)a=h[b],$(a).html("");b=g.$el.find("input");f=0;for(h=b.length;f<h;f++)if(c=b[f],a=$(c),"submit"===a.attr("type"))g.$submit=a;else if(a.hasClass("has-hint")&&a.val(""),d=a.data("validate"),"string"===typeof d){e=d.split(" ");k=0;for(j=e.length;k<j;k++)switch(d=e[k],d){case "required":g.validateRequired(a);break;case "email":g.validateEmail(a);break;case "minimum":g.validateMinimum(a);break;case "maximum":g.validateMaximum(a);
break;case "number":g.validateNumber(a);break;case "confirm":g.validateConfirm(a)}}if(g.isValid()&&null!=l.onValidSubmit)return l.onValidSubmit();if(!g.isValid()){f=g.$el.find("input");b=0;for(a=f.length;b<a;b++)c=f[b],g.addHint($(c));return!1}return!0})};h.prototype.validateRequired=function(a){if(""===a.val())return this.showError(a,"required")};h.prototype.validateEmail=function(a){var b;if(""!==a.val()&&(b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
b=b.test(a.val()),!b))return this.showError(a,"email")};h.prototype.validateMinimum=function(a){var b,c;if(""!==a.val()&&(b=parseInt(a.data("minimum")),c=parseInt(a.val()),c<b))return this.showError(a,"minimum")};h.prototype.validateMaximum=function(a){var b,c;if(""!==a.val()&&(b=parseInt(a.data("maximum")),c=parseInt(a.val()),c>b))return this.showError(a,"maximum")};h.prototype.validateNumber=function(a){var b;if(""!==a.val()&&(b=a.val(),isNaN(parseFloat(b))||!isFinite(b)))return this.showError(a,
"number")};h.prototype.validateConfirm=function(a){var b,c;if(""!==a.val()&&(b=a.data("confirm-target"),c=a.val(),b=$(b).val(),c!==b))return this.showError(a,"confirm")};h.prototype.showError=function(a,b){var c,d,e,f;this.isValid(!1);a.addClass("has-error");d=a.data("error-target");"undefined"!==typeof d?c=this.$el.find(d):(d=a.next(),"undefined"!==typeof d&&d.hasClass("error")&&(c=d));"undefined"!==typeof c&&(d=a.data("message-"+b),"undefined"===typeof d?(d=a.data("message"),c.html('<div class="error-msg">'+
d+"</div>")):c.append('<div class="error-msg">'+d+"</div>"));f=this;e=function(){$(this).removeClass("has-error");"undefined"!==typeof c&&c.html("");$(this).unbind("focus",e);return f.reset()};return a.focus(e)};h.prototype.addHint=function(a){var b,c,d,e;if(""===a.val()&&(d=a.data("hint"),"undefined"!==typeof d))return a.addClass("has-hint"),a.val(d),e=this,c=function(){$(this).val("");a.removeClass("has-hint");return $(this).unbind("focus",c)},b=function(){if(""===$(this).val())return $(this).unbind("blur",
b),e.addHint($(this))},a.focus(c),a.blur(b)};h.prototype.isValid=function(a){"undefined"===typeof this.valid&&(this.valid=!0);null!=a&&!1===a&&(this.valid=!1);return this.valid};h.prototype.reset=function(){return this.valid=!0};$(function(){var a,b,c,d,e;$("form").each(function(){if($(this).find("[data-validate]"))return new h($(this))});d=$("[data-depends-on]");e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(new j($(a)));return e})}).call(this);