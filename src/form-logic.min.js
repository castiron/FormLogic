/* form-logic 2013-10-02 */
(function(){var a;this.FormLogic=function(){function a(){this.validators={},this.buildDefaultValidators(),this.setupHandlers(),this.errorClass="has-error"}return a.prototype.validate=function(a,b){if(!b||"function"!=typeof b)throw"The second argument you passed to FormLogic.validator() was not a function";return this.validators[a]=b},a.prototype.setupHandlers=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(e=this,j=$("form"),l=[],f=0,h=j.length;h>f;f++){for(c=j[f],a=$(c),k=a.find("[data-validate]"),g=0,i=k.length;i>g;g++)d=k[g],b=$(d),b.blur(function(){return this.runValidators(b)}),b.focus(function(){return this.clearErrors(b)});l.push(a.submit(function(){var b,c,f,g;for(b=!1,a=$(this),g=a.find("[data-validate]"),c=0,f=g.length;f>c;c++)d=g[c],e.runValidators($(d))||(b=!0);return!b}))}return l},a.prototype.runValidators=function(a){var b,c,d,e,f,g;if(b=!1,(a.is(":hidden")||a.is(":submit"))&&!a.data("force-validation"))return b;if(e=a.data("validate"),"string"!=typeof e)return b;for(d=e.split(" "),f=0,g=d.length;g>f;f++)c=d[f],this.validators[c]&&(this.validators[c](a)||(this.showError(a,c),b=!0));return!b},a.prototype.clearErrors=function(a){return!a.is(":hidden")&&!a.is(":submit")||a.data("force-validation")?a.removeClass(this.errorClass):void 0},a.prototype.showError=function(a){return a.addClass(this.errorClass)},a.prototype.buildDefaultValidators=function(){return this.validate("required",function(a){var b,c,d,e,f;if("radio"===a.attr("type")||"checkbox"===a.attr("type")){for(b=a.attr("name"),f=$('[name="'+b+'"]'),d=0,e=f.length;e>d;d++)if(c=f[d],$(c).is(":checked"))return;return!1}return""!==a.val()}),this.validate("email",function(a){var b;return""===a.val()?!0:(b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,b.test(a.val()))}),this.validate("minimum",function(a){var b,c;return""===a.val()?!0:(b=parseFloat(a.data("minimum")),c=parseFloat(a.val()),c>=b)}),this.validate("maximum",function(a){var b,c;return""===a.val()?!0:(b=parseFloat(a.data("maximum")),c=parseFloat(a.val()),b>=c)}),this.validate("number",function(a){var b;return""===a.val()?!0:(b=a.val(),!isNaN(parseFloat(b))&&isFinite(b))})},a}(),a=new FormLogic}).call(this);